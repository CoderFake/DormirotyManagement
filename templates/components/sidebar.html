<!-- Sidebar -->
<div class="sidebar shadow">
    <!-- Menu -->
    <ul class="navbar-nav">
        <!-- Dashboard -->
        <li class="nav-item">
            <a class="nav-link {% if request.path == '/dashboard/' %}active{% endif %}" href="{% url 'dashboard:index' %}">
                <i class="fas fa-fw fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Ký túc xá
        </div>

        <!-- Phòng và khu vực -->
        {% if user.user_type == 'admin' or user.user_type == 'staff' %}
            <li class="nav-item">
                <a class="nav-link {% if 'dormitory' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseDormitory"
                    aria-expanded="{% if 'dormitory' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseDormitory">
                    <i class="fas fa-fw fa-building"></i>
                    <span>Quản lý Ký túc xá</span>
                </a>
                <div id="collapseDormitory" class="collapse {% if 'dormitory' in request.path %}show{% endif %}" aria-labelledby="headingTwo" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'dormitory/building' in request.path %}active{% endif %}" href="{% url 'dormitory:building_list' %}">Tòa nhà</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'dormitory/room-type' in request.path %}active{% endif %}" href="{% url 'dormitory:room_type_list' %}">Loại phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'dormitory/room' in request.path %}active{% endif %}" href="{% url 'dormitory:room_list' %}">Danh sách phòng</a>
{#                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'dormitory/amenity' in request.path %}active{% endif %}" href="{% url 'dormitory:amenity_list' %}">Tiện nghi</a>#}
                    </div>
                </div>
            </li>
        {% endif %}

        <!-- Đăng ký phòng -->
        <li class="nav-item">
            <a class="nav-link {% if 'registration' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseRegistration"
                aria-expanded="{% if 'registration' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseRegistration">
                <i class="fas fa-fw fa-file-contract"></i>
                <span>Đăng ký phòng</span>
            </a>
            <div id="collapseRegistration" class="collapse {% if 'registration' in request.path %}show{% endif %}" aria-labelledby="headingRegistration" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/apply' in request.path %}active{% endif %}" href="{% url 'registration:apply' %}">Đăng ký mới</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/my-applications' in request.path %}active{% endif %}" href="{% url 'registration:my_applications' %}">Đơn đăng ký của tôi</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/my-contracts' in request.path %}active{% endif %}" href="{% url 'registration:my_contracts' %}">Hợp đồng của tôi</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/period' in request.path %}active{% endif %}" href="{% url 'registration:period_list' %}">Kỳ đăng ký</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/application' in request.path %}active{% endif %}" href="{% url 'registration:application_list' %}">Đơn đăng ký</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/contract' in request.path %}active{% endif %}" href="{% url 'registration:contract_list' %}">Hợp đồng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/check-in' in request.path %}active{% endif %}" href="{% url 'registration:check_in_list' %}">Nhận phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'registration/check-out' in request.path %}active{% endif %}" href="{% url 'registration:check_out_list' %}">Trả phòng</a>
                    {% endif %}
                </div>
            </div>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Tài chính
        </div>

        <!-- Thanh toán và hóa đơn -->
        <li class="nav-item">
            <a class="nav-link {% if 'payment' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePayment"
                aria-expanded="{% if 'payment' in request.path %}true{% else %}false{% endif %}" aria-controls="collapsePayment">
                <i class="fas fa-fw fa-credit-card"></i>
                <span>Thanh toán</span>
            </a>
            <div id="collapsePayment" class="collapse {% if 'payment' in request.path %}show{% endif %}" aria-labelledby="headingPayment" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/my-invoices' in request.path %}active{% endif %}" href="{% url 'payment:my_invoices' %}">Hóa đơn của tôi</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/pay' in request.path %}active{% endif %}" href="{% url 'payment:payment_methods' %}">Thanh toán</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/history' in request.path %}active{% endif %}" href="{% url 'payment:payment_history' %}">Lịch sử thanh toán</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/fee-type' in request.path %}active{% endif %}" href="{% url 'payment:fee_type_list' %}">Loại phí</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/invoice' in request.path %}active{% endif %}" href="{% url 'payment:invoice_list' %}">Quản lý hóa đơn</a>
{#                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/electricity' in request.path %}active{% endif %}" href="{% url 'payment:electricity_list' %}">Chỉ số điện</a>#}
{#                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/water' in request.path %}active{% endif %}" href="{% url 'payment:water_list' %}">Chỉ số nước</a>#}
{#                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'payment/transaction' in request.path %}active{% endif %}" href="{% url 'payment:transaction_list' %}">Giao dịch</a>#}
                    {% endif %}
                </div>
            </div>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Dịch vụ
        </div>

        <!-- Bảo trì và sửa chữa -->
        <li class="nav-item">
            <a class="nav-link {% if 'maintenance' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseMaintenance"
                aria-expanded="{% if 'maintenance' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseMaintenance">
                <i class="fas fa-fw fa-tools"></i>
                <span>Bảo trì & Sửa chữa</span>
            </a>
            <div id="collapseMaintenance" class="collapse {% if 'maintenance' in request.path %}show{% endif %}" aria-labelledby="headingMaintenance" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'maintenance/request' in request.path %}active{% endif %}" href="{% url 'maintenance:request_create' %}">Yêu cầu mới</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'maintenance/my-requests' in request.path %}active{% endif %}" href="{% url 'maintenance:my_requests' %}">Yêu cầu của tôi</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'maintenance/category' in request.path %}active{% endif %}" href="{% url 'maintenance:category_list' %}">Danh mục</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'maintenance/all-requests' in request.path %}active{% endif %}" href="{% url 'maintenance:request_list' %}">Tất cả yêu cầu</a>
                    {% endif %}
                </div>
            </div>
        </li>

        <!-- Thông báo -->
        <li class="nav-item">
            <a class="nav-link {% if 'notification' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseNotification"
                aria-expanded="{% if 'notification' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseNotification">
                <i class="fas fa-fw fa-bell"></i>
                <span>Thông báo</span>
            </a>
            <div id="collapseNotification" class="collapse {% if 'notification' in request.path %}show{% endif %}" aria-labelledby="headingNotification" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'notification/list' in request.path %}active{% endif %}" href="{% url 'notification:list' %}">Danh sách thông báo</a>
                    {% if user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'notification/category' in request.path %}active{% endif %}" href="{% url 'notification:category_list' %}">Danh mục</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'notification/create' in request.path %}active{% endif %}" href="{% url 'notification:create' %}">Tạo thông báo</a>
                    {% endif %}
                </div>
            </div>
        </li>

        {% if user.user_type == 'admin' %}
            <hr class="sidebar-divider">

            <div class="sidebar-heading">
                Quản trị
            </div>

            <!-- Quản lý người dùng -->
            <li class="nav-item">
                <a class="nav-link {% if 'accounts/admin' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseUsers"
                    aria-expanded="{% if 'accounts/admin' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseUsers">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Quản lý người dùng</span>
                </a>
                <div id="collapseUsers" class="collapse {% if 'accounts/admin' in request.path %}show{% endif %}" aria-labelledby="headingUsers" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'accounts/admin/student' in request.path %}active{% endif %}" href="{% url 'accounts:student_list' %}">Sinh viên</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'accounts/admin/staff' in request.path %}active{% endif %}" href="{% url 'accounts:staff_list' %}">Nhân viên</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'accounts/admin/create' in request.path %}active{% endif %}" href="{% url 'accounts:user_create' %}">Tạo tài khoản</a>
                    </div>
                </div>
            </li>

            <!-- Thống kê và Báo cáo -->
            <li class="nav-item">
                <a class="nav-link {% if 'report' in request.path %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#collapseReports"
                    aria-expanded="{% if 'report' in request.path %}true{% else %}false{% endif %}" aria-controls="collapseReports">
                    <i class="fas fa-fw fa-chart-area"></i>
                    <span>Thống kê & Báo cáo</span>
                </a>
                <div id="collapseReports" class="collapse {% if 'report' in request.path %}show{% endif %}" aria-labelledby="headingReports" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'report/occupancy' in request.path %}active{% endif %}" href="{% url 'dashboard:occupancy_report' %}">Báo cáo lưu trú</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'report/revenue' in request.path %}active{% endif %}" href="{% url 'dashboard:revenue_report' %}">Báo cáo doanh thu</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none {% if 'report/maintenance' in request.path %}active{% endif %}" href="{% url 'dashboard:maintenance_report' %}">Báo cáo bảo trì</a>
                    </div>
                </div>
            </li>

            <!-- Thiết lập hệ thống -->
            <li class="nav-item">
                <a class="nav-link {% if 'settings' in request.path %}active{% endif %}" href="{% url 'dashboard:system_settings' %}">
                    <i class="fas fa-fw fa-cogs"></i>
                    <span>Thiết lập hệ thống</span>
                </a>
            </li>
        {% endif %}

        <hr class="sidebar-divider d-none d-md-block">

        <!-- Sidebar Toggler (Sidebar) -->
        <div class="text-center d-none d-md-inline">
            <button class="rounded-circle border-0" id="sidebarToggle"></button>
        </div>

    </ul>
</div>